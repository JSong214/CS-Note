## 2. 协作

### 核心理念：软件工程的核心是“协作”

在我们深入技术细节之前，首先要理解一个核心观念：现代软件工程**不是**一个人埋头苦干、单独写代码的工作，而是一项高度依赖沟通与协作的团队活动 。

你作为开发者，只是协作网络中的一个节点。你需要和许多人打交道 ：

- **工程师同事 (Engineers)**：和你一起构建产品的人 。

- **产品经理和设计师 (Product managers, designers)**：定义产品功能和外观的人 。

- **过去和未来的员工 (Past and future employees)**：你需要读懂别人写的代码，也要保证自己写的代码能被未来的同事理解 。

- **客户 (Customers)**：产品的最终使用者，他们的反馈是产品迭代的源动力 。

  

无论是敏捷开发、Git，还是代码审查，都是为了让这个协作过程更高效、更顺畅。

------

### 知识点一：敏捷开发 (Agile Development)

#### 1. 什么是敏捷开发？

敏捷开发是一种**迭代式**的软件开发方法，它强调**持续发布**和**整合客户反馈** 。相比于传统的“瀑布模型”（所有东西都规划好再一口气做完），敏捷开发将一个大项目分解成许多个小周期，每个周期都能产出一个可用的产品增量 。

敏捷开发有四个核心价值观 ：

- **个体与互动** 高于 流程与工具 。
- **可工作的软件** 高于 详尽的文档 。
- **客户合作** 高于 合同谈判 。
- **响应变化** 高于 遵循计划 。



#### 2. Scrum 框架

Scrum 是实现敏捷开发最流行的一种框架 。它将开发流程具体化为以下几个步骤：

1. **产品待办列表 (Product Backlog)**: 这是一个包含了所有需要开发的功能、修复的 Bug 的总列表，通常以“用户故事 (user stories)”的形式编写 。你可以把它想象成一个项目的“愿望清单” 。
2. **冲刺待办列表 (Sprint Backlog)**: 开发团队从 Product Backlog 中挑选出优先级最高的若干任务，作为下一个开发周期（即 Sprint）需要完成的目标 。
3. **冲刺 (Sprint)**: 这是一个固定时长的开发周期，通常为1-4周 。团队在这段时间内集中精力完成 Sprint Backlog 中的任务，并举行每日站会 (daily stand-up) 来同步进度 。
4. **可工作的软件增量 (Working Increment)**: 每个 Sprint 结束后，都应该交付一个可以运行的产品版本，这个版本包含了本次 Sprint 完成的新功能 。



#### 3. 项目管理工具：Jira

Jira 是一款由 Atlassian 公司开发的，用于追踪问题和管理项目的强大工具 。在敏捷开发中，Jira 可以帮助我们 ：

- **管理 Backlog**：创建和排列 Product Backlog 中的任务 。
- **规划 Sprint**：将任务从 Backlog 拖拽到指定的 Sprint 中 。
- **追踪进度**：在看板 (Board) 上清晰地看到每个任务处于“待办 (TO DO)”、“进行中 (IN PROGRESS)”还是“已完成 (DONE)”的状态 。
- **分配任务**：将每个任务（在 Jira 中称为 "ticket" 或 "issue"）分配给具体的负责人 。

**总结**：敏捷开发和 Scrum 是一套指导我们如何规划和管理项目的“方法论”，而 Jira 则是帮助我们落地这套方法论的“工具”。

------

### 知识点二：版本控制系统 Git

当团队开始协作编码时，就会面临一个问题：如何管理所有人写的代码？

- A 修改了 `Login.java` 文件。
- B 也修改了 `Login.java` 文件。
- 如何将 A 和 B 的修改合并到一起，同时不丢失任何人的工作？

这时候就需要 **版本控制系统 (Version Control System)**，而 Git 是目前最强大、最流行的版本控制系统 。



#### 1. Git 的基本工作流

Git 的核心是“提交”(Commit)，它就像是为你当前所有文件的状态拍了一张“快照” 。这个流程可以分为四步：

1. **工作区 (Working Directory)**: 你在电脑上能看到的、正在编辑的文件目录 。

2. **暂存区 (Staging Area)**: 一个临时区域。你使用 `git add` 命令，告诉 Git 你希望在下一次“快照”中包含哪些文件的改动 。

3. **本地仓库 (Local Repo)**: 你的个人代码数据库。你使用 `git commit` 命令，将暂存区里的所有改动生成一个“快照”（即一个 Commit），并永久保存在本地仓库中 。

4. **远程仓库 (Remote Repo)**: 托管在云端（如 GitHub, GitLab）的代码服务器，是团队共享代码的地方 。你使用 `git push` 命令，将本地仓库的更新推送到远程仓库，这样其他同事就能看到了 。

   

反之，同事推送了更新后，你可以使用 `git pull` 命令，将远程仓库的最新代码拉取到你的本地仓库 。



#### 2. 提交历史 (Commit History)

每个 Commit 都包含了指向它前一个 Commit 的“指针” 。这样，所有的 Commit 就串成了一条类似**链表**的结构 。你可以通过 `git log` 命令查看这条历史记录 。这非常有用，因为你可以随时“回溯”到过去的任何一个版本 。



#### 3. 合并与冲突 (Merge & Conflict)

当两个开发者基于同一个旧版本，各自进行了不同的开发，然后都想把自己的代码推送到远程仓库时，他们的开发历史就出现了**分叉 (diverge)** 。

- **合并 (Merge)**: 为了解决分叉，Git 会尝试将两个分叉的“头”合并到一起，生成一个新的“合并提交 (Merge Commit)” 。这个新的 Commit 会同时指向原来两个分叉的头。

- **合并冲突 (Merge Conflict)**: 如果 A 和 B 修改了**同一个文件**的**同一行代码**，Git 就不知道该保留谁的版本，这时就会产生合并冲突 。Git 会在冲突文件中用特殊的标记（`<<<<<<<`, `=======`, `>>>>>>>`）标出冲突区域，需要开发者**手动解决**：决定保留哪个版本，或者将两者结合，然后再次提交 。

  

------

### 知识点三：Git 分支策略 (Branching)

频繁地在主线上直接 push 和 pull 很容易造成合并冲突，非常混乱 。为了解决这个问题，Git 引入了强大的**分支 (Branch)** 功能。



#### 1. 什么是分支？

你可以把分支理解为一条**独立的开发线** 。它就像从主干道分出的一条小路，你可以在这条小路上随意尝试、开发新功能，而不会影响到主干道的稳定 。

- **默认分支**: 每个 Git 仓库默认都有一个名为 `main` (或 `master`) 的主分支 。
- **创建与切换**:
  - `git branch <branch-name>`: 创建一个新分支 。
  - `git switch <branch-name>`: 切换到指定的分支进行工作 。
- **独立开发**: 在一个分支上的所有 `commit` 都只属于这条分支，不会影响 `main` 或其他分支 。

当你在分支上的功能开发完毕并通过测试后，再通过 `git merge` 命令将这条分支合并回 `main` 分支 。



#### 2. 功能分支工作流 (Feature Branch Workflow)

这是业界最主流的协作模式，它的核心原则是：**任何新功能的开发都必须在独立的分支上进行** 。`main` 分支永远保持干净、稳定，随时可以用于部署发布 。

流程如下：

1. 从 `main` 分支创建一个新的功能分支，例如 `feature/user-login`。
2. 在这个分支上进行开发、提交代码。
3. 开发完成后，将该分支合并回 `main` 分支。

这样做极大地隔离了不同功能的开发，减少了互相干扰和合并冲突 。



------

### 知识点四：拉取请求与代码审查 (Pull Requests & Code Review)

虽然功能分支解决了并行开发的问题，但又带来一个新问题：如何保证合并回 `main` 分支的代码质量是合格的？

答案就是 **拉取请求 (Pull Request, 简称 PR)** 。



#### 1. 什么是 PR？

PR 是一种机制，它让你在合并代码前，先**请求**团队其他成员来**审查 (review)** 你的代码 。你不能直接 `merge`，而是发起一个 PR，说：“嘿，我完成了这个功能，代码在这里，请大家帮忙看看有没有问题。”



#### 2. 代码审查 (Code Review)

在 PR 页面 (如 GitHub)，你的同事可以：

- **逐行评论**：对你代码的任何一行提出疑问或建议 。
- **讨论**：就实现方案进行高层次的讨论 。
- **提出修改**：要求你修复 Bug 或改进代码风格 。

你根据收到的反馈，在你的功能分支上继续修改、提交代码。这些新的提交会自动更新到 PR 中 。

只有当你的代码得到了足够多同事的**批准 (Approve)** 后，这个 PR 才最终被合并到 `main` 分支 。



**总结**：PR 和 Code Review 是保障 `main` 分支代码质量的**核心流程**。它强制要求代码在合并前必须经过同行评审，这能有效发现潜在的 Bug、提升代码的可读性和可维护性 。



### 全流程整合

现在，让我们把所有知识点串起来，看看一个真实世界里软件工程师的典型工作流：

1. **接任务**: 在 Jira 上，产品经理为你分配了一个任务 Ticket，比如“实现用户登录功能” 。
2. **创建分支**: 你从 `main` 分支切出一个新的功能分支：`git switch -c feature/login` 。
3. **编码与测试**: 你在 `feature/login` 分支上编写代码、进行测试，并不断地 `git commit` 保存你的工作进度 。
4. **发起 PR**: 功能完成后，你将 `feature/login` 分支推送到远程仓库，并在 GitHub 上发起一个 Pull Request，请求将 `feature/login` 合并到 `main` 。
5. **代码审查**: 你的同事们开始审查你的代码，并在 PR 页面留言，你根据反馈进行修改和新的 `push` 。
6. **合并与部署**: 当你的 PR 获得批准后，它被合并到 `main` 分支。至此，你的代码就正式成为产品的一部分了，可以准备部署上线了 ！