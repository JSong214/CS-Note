## Lecture16 BST / B-Tree / Red-Black Tree对比

### **三种查找树对比总结**:

1. **二叉查找树 (BST)**
   - **核心思想**: 一个简单的规则——左小右大。
   - **优点**: 实现简单，容易理解。
   - **缺点**: 性能极不稳定，最坏情况下会退化成链表 (O(N))。
   - **适用场景**: 当你确定输入数据是随机的，或者对性能要求不那么极致的简单场景。
2. **B-Tree**
   - **核心思想**: 节点内存储多个键，让树变得“矮胖”。
   - **优点**: 绝对的性能保证 (O(logN))，树的高度极低，非常适合从慢速设备（如硬盘）分块读取数据。
   - **缺点**: 实现复杂，节点内部操作开销大。
   - **适用场景**: **数据库索引**和**文件系统**。这是它的专属领域。
3. **红黑树 (Red-Black Tree)**
   - **核心思想**: 用二叉树的结构+红黑链接来巧妙地模拟 B-Tree。
   - **优点**: 性能有绝对保证 (O(logN))，同时比 B-Tree 更轻量，在内存中的插入和修改速度更快。
   - **缺点**: 规则和实现比 BST 复杂得多。
   - **适用场景**: **内存中**需要排序和快速查找的数据结构，例如各大编程语言标准库中的 `Map` 和 `Set`。



| 特性 / 操作 | BST                                   | B-Tree (2-3 Tree 示例)    | Red-Black Tree                    |
| ----------- | ------------------------------------- | ------------------------- | --------------------------------- |
| 节点存储    | 1 key                                 | 多个 key（节点“胖”）      | 1 key + color                     |
| 子节点数量  | 2                                     | key 数 + 1                | 2                                 |
| 树高度      | 最坏 O(n)                             | 始终 O(log n)             | 始终 O(log n)                     |
| 平衡策略    | 无                                    | 插入/删除 → 分裂/合并     | 插入/删除 → 旋转 + 变色           |
| 查找复杂度  | 平均 O(log n)，最坏 O(n)              | O(log n)                  | O(log n)                          |
| 插入复杂度  | 平均 O(log n)，最坏 O(n)              | O(log n)                  | O(log n)                          |
| 删除复杂度  | 平均 O(log n)，最坏 O(n)              | O(log n)                  | O(log n)                          |
| 插入步骤    | 找位置 → 挂上                         | 找叶节点 → 插入 → 分裂    | 红色插入 → 检查红红 → 旋转/变色   |
| 删除步骤    | 找节点 → 替代 (successor/predecessor) | 找叶节点 → 删除 → 合并/借 | 复杂 → 保持黑高 → 旋转/变色       |
| 使用场景    | 内存中小型数据                        | 磁盘/数据库               | 内存中大型有序数据 (TreeMap, Set) |
| 特点直觉    | “瘦高”，易退化                        | “矮胖”，高度低            | “瘦+旋转”，高度有保障             |



💡 快速记忆：

- **BST** → 最基础 → 查找/插入简单但可能退化
- **B-Tree** → 磁盘友好 → 节点胖，少层高度
- **RB Tree** → 内存友好 → 节点瘦，但通过旋转 + 变色保持平衡
  - RB Tree 红红冲突 → 叔叔节点红 → 变色，叔叔节点黑 → 旋转