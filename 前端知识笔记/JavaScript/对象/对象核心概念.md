---
date: 2025-06-12
tags:
  - JavaScript
aliases:
  - 对象
---
### **核心概念**

#### **本质：键值对的集合**

- 对象是属性的无序集合。
- 每个属性由一个 **键(key)**（通常是字符串或 Symbol）和一个 **值(value)** 组成。
- 值可以是任何[[数据类型]]：基本类型（`string`, `number`, `boolean`, `null`, `undefined`, `symbol`, `bigint`）或其他对象（包括函数、数组等）。
- `key` 是访问其关联 `value` 的唯一标识符。



#### **创建对象：**

- **对象字面量 (最常用)：**

  ```js
  const person = {
      name: "Alice", // 属性 'name', 值 "Alice"
      age: 30,
      isStudent: false,
      greet: function() { // 属性 'greet', 值是一个函数 (方法)
          console.log("Hello!");
      },
      "favorite color": "blue" // 包含空格的键名需要用引号
  };
  ```


- **`new Object()` 构造函数：**

  ```js
  const car = new Object();
  car.make = "Toyota";
  car.model = "Camry";
  ```


- **构造函数 (用于创建特定类型的多个对象)：**

  ```js
  function Person(name, age) {
      this.name = name;
      this.age = age;
      this.greet = function() {
          console.log(`Hello, I'm ${this.name}`);
      };
  }
  const alice = new Person("Alice", 30);
  const bob = new Person("Bob", 25);
  ```


- **`Object.create()` (基于现有对象创建新对象，设置原型)：**

  ```js
  const animal = { eats: true };
  const rabbit = Object.create(animal); // rabbit 的原型是 animal
  console.log(rabbit.eats); // true (通过原型链找到)
  ```


#### **访问属性：**

- **点表示法 (`.`)**：当属性名是有效的标识符（没有空格、不以数字开头等）时使用。

  ```js
  console.log(person.name); // "Alice"
  person.greet(); // "Hello!"
  ```


- **方括号表示法 (`[]`)**：当属性名包含特殊字符、空格、是变量、或是动态计算出来时使用。更通用。

  ```js
  console.log(person["age"]); // 30
  const propName = "favorite color";
  console.log(person[propName]); // "blue"
  person["greet"](); // "Hello!"
  ```


- **添加/修改属性：**直接通过点或方括号赋值。如果属性不存在则添加；存在则修改。

  ```js
  person.job = "Developer"; // 添加新属性
  person.age = 31; // 修改现有属性
  person["has pet"] = true; // 添加包含空格的属性
  ```





### **深入特性**

#### **属性特性 (Property Attributes - 数据属性)：**

- 每个属性（除了值）还有三个隐藏的特性（可通过 `Object.getOwnPropertyDescriptor()` 获取）：

  - **`value`**: 属性的实际值。
  - **`writable`**: `true` 表示属性的值可以被改变。
  - **`enumerable`**: `true` 表示该属性会在 `for...in` 循环和 `Object.keys()` 中出现。
  - **`configurable`**: `true` 表示该属性可以被删除，并且它的特性（除了 `value` 和 `writable` 从 `true` 改为 `false`）可以被修改。

- 使用 `Object.defineProperty()` 或 `Object.defineProperties()` 可以精确定义这些特性：

  ```js
  const obj = {};
  Object.defineProperty(obj, "secret", {
      value: 42,
      writable: false, // 不可写
      enumerable: false, // 不可枚举 (不会出现在 for...in / Object.keys 中)
      configurable: false // 不可配置 (不能删除，不能修改特性)
  });
  console.log(obj.secret); // 42
  obj.secret = 100; // 静默失败（严格模式下报错）
  console.log(obj.secret); // 42
  delete obj.secret; // false (静默失败)
  ```

  

#### **访问器属性 (Getter/Setter)：**

- 属性不一定有直接存储的值，而是通过 getter 和 setter 函数来定义如何获取和设置值。

- 同样使用 `Object.defineProperty()` 定义，特性是 `get`, `set`, `enumerable`, `configurable`。

  ```js
  const user = {
      firstName: "John",
      lastName: "Doe",
      get fullName() { // getter
          return `${this.firstName} ${this.lastName}`;
      },
      set fullName(value) { // setter
          [this.firstName, this.lastName] = value.split(" ");
      }
  };
  console.log(user.fullName); // "John Doe" (调用 getter)
  user.fullName = "Alice Smith"; // (调用 setter)
  console.log(user.firstName); // "Alice"
  console.log(user.lastName); // "Smith"
  ```



#### **重要的[[方法(Methods)|对象方法]] (静态方法)**

- **`Object.keys(obj)` / `Object.values(obj)` / `Object.entries(obj)`：**

  - 返回一个数组，包含对象**自身**（不含继承的）、**可枚举**属性的键/值/键值对数组。

    ```js
    const keys = Object.keys(person); // ["name", "age", "isStudent", "greet"]
    const values = Object.values(person); // ["Alice", 30, false, [Function: greet]]
    const entries = Object.entries(person); // [["name", "Alice"], ["age", 30], ...]
    ```



#### **遍历对象**

- **`for...in` 循环：**

  - 遍历对象**自身及其原型链上**的所有**可枚举**属性（字符串键）。

  - 通常需要配合 `hasOwnProperty()` 过滤掉继承的属性：

    ```js
    for (const key in person) {
        if (person.hasOwnProperty(key)) {
            console.log(key, person[key]); // 只输出 person 自身的属性
        }
    }
    ```


- **`Object.keys()` + 循环：**

  - 只遍历对象**自身**的**可枚举**属性键（推荐常用）。

    ```js
    Object.keys(person).forEach(key => {
        console.log(key, person[key]);
    });
    ```


### **其他重要点**

#### **ES6 增强：**

- **属性名简写：** `{ name, age }` 等价于 `{ name: name, age: age }`。

- **方法简写：** `{ greet() { ... } }` 等价于 `{ greet: function() { ... } }`。

- **计算属性名：** 在字面量中用 `[expression]` 动态定义属性名。

  ```js
  const dynamicKey = 'id';
  const obj = {
      [dynamicKey + 'Value']: 123 // 属性名为 "idValue"
  };
  ```


#### **解构赋值：** 

- **作用：**从对象或数组中提取值到变量。

  ```js
  const { name, age } = person; // 创建变量 name=person.name, age=person.age
  const { name: personName, age: personAge } = person; // 别名
  ```


#### **展开运算符 (`...`):** 

- **作用：**用于对象字面量来拷贝/合并对象（也是浅拷贝）。

  ```js
  const clone = { ...person }; // 浅拷贝 person 的自身可枚举属性
  const merged = { ...obj1, ...obj2 }; // 合并 obj1 和 obj2 (后面覆盖前面同名属性)
  ```





