---
date: 2025-06-17
tags:
  - Vue
aliases:
  - 声明式
---
## 声明式渲染

- Vue 最核心的特性之一。
- 只需要**声明（描述）你想要的用户界面（UI）是什么样子**，而不需要关心具体如何一步步操作 DOM 来实现它。
- 当状态发生变化时，Vue 会自动、高效地更新视图（View），使其与最新的状态保持一致。


### 核心语法与指令

##### 文本插值

- 这是最基础的数据绑定形式，使用 "Mustache" 语法。
- **语法**：`{{ }}`
- **作用**：将组件实例中的数据属性渲染为纯文本内容。
- **特点**：括号里的内容可以是任何合法的 JavaScript 表达式。

  ```html
  <div id="app">
    <p>消息: {{ message }}</p>
    <p>计算结果: {{ number * 2 + 1 }}</p>
    <p>问候语: {{ greeting() }}</p>
  </div>
  
  <script>
    const { createApp } = Vue;
  
    createApp({
      data() {
        return {
          message: 'Hello, Vue!',
          number: 5
        }
      },
      methods: {
        greeting() {
          return '早上好！';
        }
      }
    }).mount('#app');
  </script>
  ```


##### 属性绑定

不能在 HTML 属性 (Attribute) 中使用 `{{ }}`。对于动态的 HTML 属性，需要使用 `v-bind` 指令。

- **语法**：`v-bind:attribute`
- **简写**：`:` (一个冒号)
- **作用**：将一个或多个 attribute 动态地绑定到组件实例的数据上。
  ```html
  <img v-bind:src="imageSrc">
  <a v-bind:href="url">...</a>
  <div v-bind:class="{ active: isActive }"></div>
  
  <img :src="imageSrc">
  <a :href="url">...</a>
  <div :class="{ active: isActive }"></div>
  ```

  

##### 渲染原始 HTML

想输出真实的 HTML 而不是纯文本，可以使用 `v-html` 指令。

- **语法**：`v-html="yourHtmlString"`
- **作用**：将数据中的字符串作为原始 HTML 解析并渲染。

  ```html
  <div v-html="rawHtml"></div>
  ```

- 注意事项：
  - 容易导致 **XSS (跨站脚本) 攻击**。
  - 只对可信内容使用 `v-html`，**永远不要**用它来渲染用户提交的内容。



### 条件渲染

##### `v-if`, `v-else`, `v-else-if`

- **作用**：
  - 根据表达式的真假值，**真正地创建或销毁** DOM 元素。
  - 如果初始条件为假，那么对应的元素根本不会被渲染到 DOM 中。

  ```html
  <div v-if="type === 'A'">
    A
  </div>
  <div v-else-if="type === 'B'">
    B
  </div>
  <div v-else>
    Not A/B
  </div>
  ```

- 适用场景：运行时条件**很少改变**的场景。


##### `v-show`

- **作用**：
  - 无论初始条件是什么，元素**始终会被渲染**到 DOM 中。
  - 只是简单地切换元素的 CSS `display` 属性。

  ```html
  <h1 v-show="ok">Hello!</h1>
  ```

- 适用场景：需要**频繁切换**显隐状态的场景。



### 列表渲染

##### `v-for`

- **作用**：基于一个数组或对象来渲染一个列表。
- **语法**：`item in items` 或 `(item, index) in items`。

  ```html
  <ul>
    <li v-for="(item, index) in items" :key="item.id">
      {{ index }} - {{ item.message }}
    </li>
  </ul>
  ```

  

 **重点：`:key` 的重要性**

`key` 是 `v-for` 中至关重要的属性！

- **作用**：
  - `key` 为 Vue 提供了一个**追踪每个节点身份的线索**。
  - 有了它，Vue 才能准确地知道在列表数据变化时，哪些元素是新增的、哪些是删除的、哪些只是位置变了。

- **为什么必须用？**
  1. **高效的 DOM 更新**：如果没有 `key`，Vue 会采用一种“就地复用”的策略。例如，当列表顺序改变时，Vue 不会移动 DOM 元素，而是就地修改每个元素的内容，这可能导致效率低下和状态错乱。
  2. **避免状态混乱**：如果列表项是组件或包含表单输入等临时状态，没有 `key` 的就地复用会导致状态混乱。
     - 例如，你删除了列表第一项，但会发现是最后一项消失了，而第一项的内容变成了原来第二项的内容。
- **最佳实践**：
  - **使用唯一且稳定的值**：`key` 应该使用数据项中**独一无二且不会改变**的值，比如 `item.id`。
  - **不要使用 `index`**：
    - **绝对避免**在列表顺序会改变（如排序、过滤、在中间插入/删除）的情况下使用数组索引 `index` 作为 `key`。
    - 因为 **`index` 不是稳定**的，它会随着列表变化而变化，这会让 `key` 失去意义，并可能导致严重的渲染问题。



### 事件处理与双向绑定

##### 事件监听 `v-on`

- **作用**：监听 DOM 事件（如 `click`, `input`, `submit` 等），并在事件触发时执行 JavaScript 代码。
- **语法**：`v-on:event`
- **简写**：`@`
```html
<button v-on:click="counter += 1">Add 1</button>

<button @click="doSomething">Click me</button>
```



##### 双向数据绑定 `v-model`

`v-model` 是一个非常有用的**语法糖**，它通常用在表单元素（`<input>`, `<select>`, `<textarea>`）上，实现**双向数据绑定**。

- **作用**：它同时完成了两件事：
  1. 用 `v-bind` 绑定了元素的 `value` 属性到你的数据上。
  2. 用 `v-on` 监听了元素的 `input` (或 `change` 等) 事件，并在事件触发时自动更新你的数据。


```html
<input v-model="message" placeholder="edit me">
<p>Message is: {{ message }}</p>
```

上面这行代码，本质上等价于：

```html
<input :value="message" @input="message = $event.target.value">
```

